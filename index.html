<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PZEM Monitoring + RPM | Frequency | Temperature</title>

  <script src="https://cdn.jsdelivr.net/npm/canvas-gauges@2.1.7/gauge.min.js"></script>

  <style>
    body{background:#f5f5f5;font-family:Arial;padding:20px;margin:0;}
    h2{text-align:center;color:#222;margin-bottom:6px;}
    .container{display:flex;flex-wrap:wrap;justify-content:center;gap:25px;max-width:1400px;margin:auto;}
    .gauge-box{background:#fff;padding:15px;border-radius:12px;text-align:center;
      box-shadow:0 3px 10px rgba(0,0,0,0.12);}
  </style>
</head>
<body>

<h2>PZEM Monitoring + Engine Parameter</h2>
<h2>Kelas Elektronika Daya - 2025</h2>

<div class="container">

  <!-- ================= EXISTING GAUGES ================= -->
  <div class="gauge-box"><canvas id="gaugeVolt" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="300"
    data-major-ticks="0,50,100,150,200,250,300" data-units="V" data-title="Tegangan"
    data-value="0" data-color-value="#FF5722" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeArus" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="50"
    data-major-ticks="0,5,10,15,20,25,30,35,40,45,50" data-units="A" data-title="Arus"
    data-value="0" data-color-value="#2196F3" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeDaya" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="5000"
    data-major-ticks="0,1000,2000,3000,4000,5000" data-units="W" data-title="Daya"
    data-value="0" data-color-value="#4CAF50" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeKwh" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="100"
    data-major-ticks="0,20,40,60,80,100" data-units="kWh" data-title="Energi"
    data-value="0" data-color-value="#FF9800" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeFrek" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="40" data-max-value="60"
    data-major-ticks="40,45,50,55,60" data-units="Hz" data-title="Frekuensi Listrik"
    data-value="50" data-color-value="#9C27B0" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugePf" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="1"
    data-major-ticks="0,0.2,0.4,0.6,0.8,1.0" data-units="" data-title="Power Factor"
    data-value="0" data-color-value="#795548" data-glow="true"></canvas></div>


  <!-- ============== NEW ADDED GAUGES ============== -->
  <div class="gauge-box"><canvas id="gaugeRPM" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="6000"
    data-major-ticks="0,1000,2000,3000,4000,5000,6000" data-units="RPM"
    data-title="Kecepatan Putar Mesin" data-value="0"
    data-color-value="#e91e63" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeFrekMesin" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="200"
    data-major-ticks="0,50,100,150,200" data-units="Hz"
    data-title="Frekuensi Mesin (Rotational)" data-value="0"
    data-color-value="#3f51b5" data-glow="true"></canvas></div>

  <div class="gauge-box"><canvas id="gaugeTemp" data-type="radial-gauge"
    data-width="220" data-height="220" data-min-value="0" data-max-value="150"
    data-major-ticks="0,25,50,75,100,125,150" data-units="°C"
    data-title="Suhu Mesin" data-value="0"
    data-color-value="#f44336" data-glow="true"></canvas></div>

</div>


<script>
window.onload = () => {
  setTimeout(() => {
    const g = window.gauges;

    const gVolt=g[0], gArus=g[1], gDaya=g[2], gKwh=g[3], gFrek=g[4], gPf=g[5];
    const gRPM=g[6], gFrekM=g[7], gTemp=g[8];

    setInterval(() => {

      // ======== Electrical PZEM Simulation ========
      let volt = 210 + Math.random()*40;
      let arus = Math.random()*10;
      let daya = volt * arus;
      let kwh  = (Math.random()*10).toFixed(2);
      let frekListrik = 49 + Math.random()*2;
      let pf   = (0.6 + Math.random()*0.4).toFixed(2);

      // ======== Engine Simulation Data ========
      let rpm  = 1000 + Math.random() * 4000;   // RPM mesin
      let frekMesin = rpm / 30;                 // 1 Hz ≈ 60 RPM ⇒ 60/60 =1   atau  RPM/30 untuk estimasi
      let suhu = 60 + Math.random()*50;         // 60–110°C

      // Update ke gauge
      gVolt.value=volt; gArus.value=arus; gDaya.value=daya; gKwh.value=kwh;
      gFrek.value=frekListrik; gPf.value=pf;

      gRPM.value=rpm;
      gFrekM.value=frekMesin;
      gTemp.value=suhu;

    },1000);

  },800);
}
</script>

</body>
</html>
